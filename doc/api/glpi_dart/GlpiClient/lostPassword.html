<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the lostPassword method from the GlpiClient class, for the Dart programming language.">
  <title>lostPassword method - GlpiClient class - glpi_dart library - Dart API</title>


  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="../../static-assets/github.css?v1">
  <link rel="stylesheet" href="../../static-assets/styles.css?v1">
  <link rel="icon" href="../../static-assets/favicon.png?v1">

  
</head>


<body data-base-href="../../"
      data-using-base-href="false">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="../../index.html">glpi_dart</a></li>
    <li><a href="../../glpi_dart/glpi_dart-library.html">glpi_dart</a></li>
    <li><a href="../../glpi_dart/GlpiClient-class.html">GlpiClient</a></li>
    <li class="self-crumb">lostPassword method</li>
  </ol>
  <div class="self-name">lostPassword</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>


  <div id="dartdoc-main-content" class="main-content">
      <div>
<h1><span class="kind-method">lostPassword</span> method 
    <a href="https://dart.dev/null-safety" class="feature feature-null-safety" title="Supports the null safety language feature.">Null safety</a>
</h1></div>

    <section class="multi-line-signature">
      

<span class="returntype"><a href="https://api.flutter.dev/flutter/dart-async/Future-class.html">Future</a><span class="signature">&lt;<wbr><span class="type-parameter"><a href="https://api.flutter.dev/flutter/dart-core/bool-class.html">bool</a></span>&gt;</span></span>
<span class="name ">lostPassword</span>(<wbr><ol class="parameter-list"><li><span class="parameter" id="lostPassword-param-email"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a></span> <span class="parameter-name">email</span>, </span></li>
<li><span class="parameter" id="lostPassword-param-passwordForgetToken">{<span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">passwordForgetToken</span>, </span></li>
<li><span class="parameter" id="lostPassword-param-newPassword"><span class="type-annotation"><a href="https://api.flutter.dev/flutter/dart-core/String-class.html">String</a>?</span> <span class="parameter-name">newPassword</span>}</span></li>
</ol>)

      

    </section>
    
<section class="desc markdown">
  <p>Allow to request a password reset for the account using the <code>email</code> address.
Return true if the request is successful BUT this doesn't mean that your glpi is configured to send emails.
Check the glpi's configuration to see the prerequisites (notifications need to be enabled).
If <code>passwordForgetToken</code> AND <code>newPassword</code> are set, the password will be changed with the value of <code>newPassword</code> instead.
Sending <code>passwordForgetToken</code> without <code>newPassword</code> and the opposite will throw an <a href="https://api.flutter.dev/flutter/dart-core/ArgumentError-class.html">ArgumentError</a>.
Reference: <a href="https://github.com/glpi-project/glpi/blob/master/apirest.md#lost-password">https://github.com/glpi-project/glpi/blob/master/apirest.md#lost-password</a>.</p>
</section>


    
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">Future&lt;bool&gt; lostPassword(String email,
    {String? passwordForgetToken, String? newPassword}) async {
  if (_sessionToken == null) {
    throw Exception(&#39;No session token, initSession first&#39;);
  }

  &#47;&#47; Unlike ALL the other method this one doesn&#39;t require any kind of authentication.
  final Map&lt;String, String&gt; headers = {
    &#39;Content-Type&#39;: &#39;application&#47;json&#39;,
  };

  final body = {
    &#39;email&#39;: email,
  };

  late http.Response response;

  &#47;&#47; Because I&#39;m sure someone will try to use this method with a newPassword without passwordForgetToken.
  if (passwordForgetToken!.isNotEmpty &amp;&amp; newPassword!.isEmpty) {
    throw ArgumentError(
        &#39;newPassword is required if passwordForgetToken is set&#39;);
    &#47;&#47; Because I&#39;m sure someone will try to use this method with a passwordForgetToken without newPassword.
  } else if (passwordForgetToken.isEmpty &amp;&amp; newPassword!.isNotEmpty) {
    throw ArgumentError(
        &#39;passwordForgetToken is required if newPassword is set&#39;);
  } else if (passwordForgetToken.isNotEmpty &amp;&amp; newPassword!.isNotEmpty) {
    body[&#39;passwordForgetToken&#39;] = passwordForgetToken;
    body[&#39;newPassword&#39;] = newPassword;
    response = await http.put(
      Uri.parse(&#39;$baseUrl&#47;lostPassword&#39;),
      headers: headers,
      body: jsonEncode(body),
    );
  } else {
    response = await http.put(Uri.parse(&#39;$baseUrl&#47;lostPassword&#39;),
        body: json.encode(body), headers: headers);
  }

  if (response.statusCode != 200) {
    throw Exception(&#39;${response.statusCode} ${response.body}&#39;);
  }

  return true;
}</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="../../index.html">glpi_dart</a></li>
  <li><a href="../../glpi_dart/glpi_dart-library.html">glpi_dart</a></li>
  <li><a href="../../glpi_dart/GlpiClient-class.html">GlpiClient</a></li>
  <li class="self-crumb">lostPassword method</li>
</ol>


    <h5>GlpiClient class</h5>
    <ol>

    <li class="section-title"><a href="../../glpi_dart/GlpiClient-class.html#constructors">Constructors</a></li>
    <li><a href="../../glpi_dart/GlpiClient/GlpiClient.withLogin.html">withLogin</a></li>
    <li><a href="../../glpi_dart/GlpiClient/GlpiClient.withToken.html">withToken</a></li>


    <li class="section-title">
      <a href="../../glpi_dart/GlpiClient-class.html#instance-properties">Properties</a>
    </li>
    <li><a href="../../glpi_dart/GlpiClient/appToken.html">appToken</a></li>
    <li><a href="../../glpi_dart/GlpiClient/baseUrl.html">baseUrl</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/hashCode.html">hashCode</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/runtimeType.html">runtimeType</a></li>
    <li><a href="../../glpi_dart/GlpiClient/session.html">session</a></li>
    <li><a href="../../glpi_dart/GlpiClient/sessionToken.html">sessionToken</a></li>

    <li class="section-title"><a href="../../glpi_dart/GlpiClient-class.html#instance-methods">Methods</a></li>
    <li><a href="../../glpi_dart/GlpiClient/addItems.html">addItems</a></li>
    <li><a href="../../glpi_dart/GlpiClient/changeActiveEntities.html">changeActiveEntities</a></li>
    <li><a href="../../glpi_dart/GlpiClient/changeActiveProfile.html">changeActiveProfile</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getActiveEntities.html">getActiveEntities</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getActiveProfile.html">getActiveProfile</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getAllItem.html">getAllItem</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getFullSession.html">getFullSession</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getGlpiConfig.html">getGlpiConfig</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getItem.html">getItem</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getMultipleItems.html">getMultipleItems</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getMyEntities.html">getMyEntities</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getMyProfiles.html">getMyProfiles</a></li>
    <li><a href="../../glpi_dart/GlpiClient/getSubItems.html">getSubItems</a></li>
    <li><a href="../../glpi_dart/GlpiClient/initSession.html">initSession</a></li>
    <li><a href="../../glpi_dart/GlpiClient/killSession.html">killSession</a></li>
    <li><a href="../../glpi_dart/GlpiClient/listSearchOptions.html">listSearchOptions</a></li>
    <li><a href="../../glpi_dart/GlpiClient/lostPassword.html">lostPassword</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/noSuchMethod.html">noSuchMethod</a></li>
    <li><a href="../../glpi_dart/GlpiClient/searchItems.html">searchItems</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/toString.html">toString</a></li>

    <li class="section-title inherited"><a href="../../glpi_dart/GlpiClient-class.html#operators">Operators</a></li>
    <li class="inherited"><a href="https://api.flutter.dev/flutter/dart-core/Object/operator_equals.html">operator ==</a></li>




</ol>

  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    glpi_dart
      0.0.1
  </span>

  
</footer>



<script src="../../static-assets/highlight.pack.js?v1"></script>
<script src="../../static-assets/script.js?v1"></script>



</body>

</html>

